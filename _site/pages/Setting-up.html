<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Setting up</title>
        <base href="/" />
        
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="stylesheet" href="/css/monokai_sublime.css">
        <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon" />

        <script src="/js/highlight.pack.js"></script>
        <script src="/js/perso.js"></script>
        <script> hljs.configure({tabReplace: '    '}); hljs.initHighlightingOnLoad();</script>
    </head>


    <body>

        <!-- Header -->
        <div class="header">
            <a class="ots" href="http://www.opentechschool.org">OpenTechSchool</a>
            <a href="/" id="titleHeader"> Artificial Intelligence for robots and swarms</a>
        </div>
      
        <!-- Middle part -->
        <div class="site">
            <h1 class="title">Setting up</h1>
            <hr />

	<!-- Left menu-->
        <div class="aside" id="p_menu">
            <a href="/">Home</a>
            <ul>
                  
                    <li><a href="/pages/Setting-up.html">log_0 Setting up</a></li>
                                
                    <li><a href="/pages/follow-the-line.html">log_1 Let's get rolling</a></li>
                                                                                                
	            <center><hr width="60%"/></center>
                Reference Material<br>
            	<p> <a href="/ref_lua.html">Lua</a> / <a href="/ref_argos.html">ARGoS</a> / <a href="/ref_install.html">Installation</a></p>
            </ul>

	    <center><hr width="60%"/></center>
            <p class="madeBy">
                Course by  <a href="https://romamile.com"> Roman </a>  
            </p>
        </div>
	<!-- Contect of the page (from Markdown files) -->
        <div class="main" id="p_content">
            <h2 id="the-argos-simulator">The ARGoS Simulator</h2>
<p>As mentioned in the introduction, in order to simulate both our robots and their environment, we’ll use <a href="http://www.argos-sim.info/">ARGoS</a>, a multi-physics robot simulator easily customizable by adding new plug-ins. It can efficiently simulate large-scale swarms of robots. Its accuracy aims to be as close as possible to real simulation. It’s a tool created with research in mind and used all around the world in laboratories. While we will use it as an educational tool, its constrains &amp; quality are the same than such that would be required in a professional and research environment. In short: whatever you will create here will have real sense. If your behaviour is getting amazing result on a task, be ready to publish about it!</p>

<p>In order to run an experiment in ARGoS, you need three things:</p>

<ul>
  <li>the code for the behavior of the robot(s),  either in C++ or in Lua;</li>
  <li>the environment code (optional, and only in C++), either to update the environment (e.g., adding and moving objects) or to add a visualation layer (very practical for debugging);</li>
  <li>the .argos (XML format) file describing the experimental conditions, in particular, what robot code and environement code to use, and a description of the arena and robots.</li>
</ul>

<p>The environement code will be provided, as well as the .argos file. While we don’t recommend altering the C++ environement code, you can open the .argos experiment file, and make modifications (number of robots, initial positioning, size of the area… more info about it <a href="./ref_setup.html">here</a>). That being said, you will focus on the robot’s behavior code, and in this workshop you will use the Lua language. While slightly slower, it is easier to get a grip on, and to itterate over.</p>

<h3 id="setting-up-argos--lua">Setting Up ARGoS &amp; Lua</h3>
<p>ARGoS is developed for Linux first, but can also be installed on Mac and Windows. For Linux and Max, please go <a href="http://www.argos-sim.info/core.php">here</a>. For windows, please go <a href="./ref_win.html">here</a>. If instead, for any particular reasons, you prefere to install it from source, or are curious to have a look at the source code, ARGoS is hosted on github <a href="https://github.com/ilpincy/argos3/">here</a>.</p>

<p>In order to check if ARGoS is well installed, just type <code class="language-plaintext highlighter-rouge">argos3 --version</code> in your favorite command line, and a green text should appear with the version name of currently installed ARGoS.</p>

<h3 id="running-argos">Running ARGoS</h3>
<p>First, create a working directory for the workshop, download <a href="./assets/setup/setup_0.tar.gz">here</a> the assets you will use in this workshop, and unpack them in your working directory. In it, you will find the environement code and experimental setup we will use, as well as some pictures we will put on the floor of the arena. Now, to run ARGoS, go in your command line, in your working directory, and run: <code class="language-plaintext highlighter-rouge">argos3 -c expSetup.argos</code>. The <code class="language-plaintext highlighter-rouge">-c</code> is a flag, telling argos that the file right of it will be used as a configuration file.</p>

<p><a href="./assets/argosUI.png"><center><img src="./assets/argosUI.png" alt="picture of ARGoS UI" style="height:300px; margin:10px;" /></center></a></p>

<p>You should see two windows appearing. The small one is a text editor (where you will type your Lua code), the other one is the ARGoS simulator itself (where you will see the little robots moving and behaving erraticly).</p>

<p>So, your simulation is set, ready to be run. To that end, we use the buttons on the top: the Play button plays the simulation, the Stop button stops it, the Forward button makes it quicker by only drawing every X frame (the number on its right). The button mixing pause and play makes the simulation step by step, perfect for debugging. In the center of the software, a view of your arena, and on its right, two text area for logging purposes. And the camera movement? Done in a not so classic (but workable) way using the mouse, you’ll get the hang of it…</p>

<h3 id="your-first-code">Your first code</h3>
<p>In the Lua code editor, you will find that there are already some functions defined, giving your code a structure. Already well explained in the comments, they are:</p>

<ul>
  <li><strong>init</strong> called once at the creation of the robots</li>
  <li><strong>step</strong> called at each step of the experiment</li>
  <li><strong>reset</strong> called when the reset button is pressed</li>
  <li><strong>destroy</strong> called at the end of the experiment</li>
</ul>

<p>On top of Lua’s syntax and libraries, ARGoS provide you with a specific container, adequately called <code class="language-plaintext highlighter-rouge">robot</code>. Anything robot related (sensor &amp; actuator) will go through it. We will also use as a control for further visualisation. Another thing to keep in mind: the classic <code class="language-plaintext highlighter-rouge">print</code> Lua function doesn’t work here, you need instead to use the ARGoS <code class="language-plaintext highlighter-rouge">log</code> function that re-routs printing to the logging text areas of the simulator.</p>

<p>Let’s fill up  our experimentation with some code. Type inside the step function the following line, where <code class="language-plaintext highlighter-rouge">robot.id</code> refers to the robot own identification number.</p>

<pre><code class="language-Lua">log("Hello, my name is " .. robot.id)
</code></pre>

<p>Apart from the classic text editor functionality, you’ll see on the right end a little gear icon. Click on it (or press <strong>Ctrl-E</strong>) to execute/load your code. The code is then loaded in the ARGoS simulator, and you just have to press play to run it. On the right side, you’ll see time steps and logging information. The simulation of the world here is executed steps by steps. At each steps (or ticks), the function <code class="language-plaintext highlighter-rouge">step</code> is called for each robots, and is resolved.</p>

<h2 id="reference-material">Reference Material</h2>
<p>Lua is a quick straight forward scripting language. If you know python, you’re in good hands. If you don’t want python, you’re still in good hands. There is scope for variables. If you want a variable to work as some global memory of your robot, you need to make it global by defining it at the top of your code (outside of any function). You’ll see that Lua has only one data structure  type, <em>tables</em>, behaving as associative arrays, they store a set of key/value pairs. As mentioned earlier, to (re?)discover Lua and/or better understand this notion of table, you might want to check our <a href="./ref_lua.html">Lua reference page</a>, in combination with the other <a href="./ref_argos.html">ARGoS reference page</a>.</p>

        </div>

      </div>

      <!-- Footer -->

      <div class="footer">
          <p> <a href="https://romamile.com">Roman Miletitch </a>  || Licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a>
          </p>
      </div>
  </body>

</html>
